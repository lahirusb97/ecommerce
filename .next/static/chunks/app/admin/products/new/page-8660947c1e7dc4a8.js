(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9770],{1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return l}});let a=r(8229),n=r(8883),s=r(3063),i=a._(r(1193));function l(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=s.Image},2068:(e,t,r)=>{Promise.resolve().then(r.bind(r,7332))},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2596),n=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},5784:(e,t,r)=>{"use strict";r.d(t,{bq:()=>u,eb:()=>p,gC:()=>m,l6:()=>d,yv:()=>c});var a=r(5155);r(2115);var n=r(2918),s=r(6474),i=r(5196),l=r(7863),o=r(3999);function d(e){let{...t}=e;return(0,a.jsx)(n.bL,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,a.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:r="default",children:i,...l}=e;return(0,a.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":r,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[i,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(s.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:r,position:s="popper",...i}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...i,children:[(0,a.jsx)(f,{}),(0,a.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),(0,a.jsx)(g,{})]})})}function p(e){let{className:t,children:r,...s}=e;return(0,a.jsxs)(n.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(i.A,{className:"size-4"})})}),(0,a.jsx)(n.p4,{children:r})]})}function f(e){let{className:t,...r}=e;return(0,a.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(l.A,{className:"size-4"})})}function g(e){let{className:t,...r}=e;return(0,a.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(s.A,{className:"size-4"})})}},6220:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var a=r(5155),n=r(2115),s=r(3655),i=n.forwardRef((e,t)=>(0,a.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=r(3999);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(i,{ref:t,className:(0,l.cn)("text-sm font-medium text-black dark:text-white leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});o.displayName=i.displayName},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var a=r(1469),n=r.n(a)},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var a=r(5155);r(2115);var n=r(9708),s=r(2085),i=r(3999);let l=(0,s.F)("hover:curser-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xsm:"h-6 px-2 py-1 text-xs",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:s,asChild:o=!1,...d}=e,c=o?n.Slot:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:r,size:s,className:t}),"hover:cursor-pointer"),...d})}},7332:(e,t,r)=>{"use strict";r.d(t,{default:()=>H});var a=r(5155),n=r(2177),s=r(221),i=r(4477);let l=(0,i.createServerReference)("40b520d8f3ecc6d252c583bb7dd14d4e40a00bb3f6",i.callServer,void 0,i.findSourceMapURL,"createProduct");var o=r(5594);let d=o.z.object({optionId:o.z.string().min(1),valueId:o.z.string().min(1)}),c=o.z.object({sku:o.z.string().min(1,"SKU is required"),price:o.z.coerce.number().positive("Price must be > 0"),stockQty:o.z.coerce.number().int().nonnegative("Stock â‰¥ 0"),imageUrl:o.z.string().url().optional(),publicId:o.z.string().optional(),values:o.z.array(d).min(1,"At least one option")}),u=o.z.object({name:o.z.string().min(1,"Name is required"),slug:o.z.string().min(1,"Slug is required"),description:o.z.string().optional(),categoryId:o.z.string().min(1,"Select a category"),brandId:o.z.string().optional(),variants:o.z.array(c).min(1,"At least one variant"),productCategoryIds:o.z.array(o.z.string()).optional()});var m=r(2115),p=r(5784),f=r(9852),g=r(3999);function v(e){let{className:t,...r}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,g.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}let x=()=>{let[e,t]=(0,m.useState)([]),[r,a]=(0,m.useState)(!0),[n,s]=(0,m.useState)(!1),[i,l]=(0,m.useState)({search:null}),o=(0,m.useRef)(null),d=(0,m.useCallback)(async()=>{o.current&&o.current.abort();let e=new AbortController;o.current=e,a(!0),s(!1);try{let r=Object.fromEntries(Object.entries(i).filter(e=>{let[,t]=e;return null!=t&&""!==t})).toString(),a=new URLSearchParams(r),n=await fetch("/api/categories/?".concat(a),{method:"GET",signal:e.signal});if(!n.ok)throw Error("Failed to fetch categories");let s=await n.json();e.signal.aborted||t(s)}catch(t){console.error("Error fetching categories:",t),e.signal.aborted||s(!0)}finally{a(!1)}},[i]);return(0,m.useEffect)(()=>(d(),()=>{o.current&&o.current.abort()}),[d]),{categories:e,categoriesLoading:r,categoriesError:n,refresh:d,setCategoryParamsData:e=>{l(t=>({...t,...e}))}}};var b=r(6101),h=r(6081),j=r(5185),y=r(5845),N=r(5503),w=r(1275),k=r(8905),C=r(3655),z="Checkbox",[S,I]=(0,h.A)(z),[E,_]=S(z);function O(e){let{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:i,form:l,name:o,onCheckedChange:d,required:c,value:u="on",internal_do_not_use_render:p}=e,[f,g]=(0,y.i)({prop:r,defaultProp:null!=s&&s,onChange:d,caller:z}),[v,x]=m.useState(null),[b,h]=m.useState(null),j=m.useRef(!1),N=!v||!!l||!!v.closest("form"),w={checked:f,disabled:i,setChecked:g,control:v,setControl:x,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:j,required:c,defaultChecked:!F(s)&&s,isFormControl:N,bubbleInput:b,setBubbleInput:h};return(0,a.jsx)(E,{scope:t,...w,children:"function"==typeof p?p(w):n})}var R="CheckboxTrigger",P=m.forwardRef((e,t)=>{let{__scopeCheckbox:r,onKeyDown:n,onClick:s,...i}=e,{control:l,value:o,disabled:d,checked:c,required:u,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:g,isFormControl:v,bubbleInput:x}=_(R,r),h=(0,b.s)(t,p),y=m.useRef(c);return m.useEffect(()=>{let e=null==l?void 0:l.form;if(e){let t=()=>f(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,f]),(0,a.jsx)(C.sG.button,{type:"button",role:"checkbox","aria-checked":F(c)?"mixed":c,"aria-required":u,"data-state":D(c),"data-disabled":d?"":void 0,disabled:d,value:o,...i,ref:h,onKeyDown:(0,j.m)(n,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,j.m)(s,e=>{f(e=>!!F(e)||!e),x&&v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});P.displayName=R;var M=m.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:l,disabled:o,value:d,onCheckedChange:c,form:u,...m}=e;return(0,a.jsx)(O,{__scopeCheckbox:r,checked:s,defaultChecked:i,disabled:o,required:l,onCheckedChange:c,name:n,form:u,value:d,internal_do_not_use_render:e=>{let{isFormControl:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P,{...m,ref:t,__scopeCheckbox:r}),n&&(0,a.jsx)(L,{__scopeCheckbox:r})]})}})});M.displayName=z;var A="CheckboxIndicator",T=m.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:n,...s}=e,i=_(A,r);return(0,a.jsx)(k.C,{present:n||F(i.checked)||!0===i.checked,children:(0,a.jsx)(C.sG.span,{"data-state":D(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});T.displayName=A;var U="CheckboxBubbleInput",L=m.forwardRef((e,t)=>{let{__scopeCheckbox:r,...n}=e,{control:s,hasConsumerStoppedPropagationRef:i,checked:l,defaultChecked:o,required:d,disabled:c,name:u,value:p,form:f,bubbleInput:g,setBubbleInput:v}=_(U,r),x=(0,b.s)(t,v),h=(0,N.Z)(l),j=(0,w.X)(s);m.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!i.current;if(h!==l&&e){let r=new Event("click",{bubbles:t});g.indeterminate=F(l),e.call(g,!F(l)&&l),g.dispatchEvent(r)}},[g,h,l,i]);let y=m.useRef(!F(l)&&l);return(0,a.jsx)(C.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=o?o:y.current,required:d,disabled:c,name:u,value:p,form:f,...n,tabIndex:-1,ref:x,style:{...n.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function F(e){return"indeterminate"===e}function D(e){return F(e)?"indeterminate":e?"checked":"unchecked"}L.displayName=U;var V=r(5196);function q(e){let{className:t,...r}=e;return(0,a.jsx)(M,{"data-slot":"checkbox",className:(0,g.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(T,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(V.A,{className:"size-3.5"})})})}var G=r(6220);function W(e){let{categories:t,fieldName:r="productCategoryIds"}=e,{control:s}=(0,n.xW)();return(0,a.jsxs)("div",{className:"rounded-2xl border border-neutral-200 bg-white p-2 mt-2 space-y-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg text-neutral-700 mb-1",children:"SubCategories"}),(0,a.jsx)("p",{className:"text-xs text-neutral-400 mb-3",children:"Choose a main category and any additional subcategories. Main category is used for store organization, others for filters/search."}),(0,a.jsx)(n.xI,{name:r,control:s,render:e=>{let{field:r}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:t.map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(q,{id:"cat-".concat(e.id),checked:(null==(t=r.value)?void 0:t.includes(e.id))||!1,onCheckedChange:t=>{t?r.onChange([...r.value||[],e.id]):r.onChange((r.value||[]).filter(t=>t!==e.id))}}),(0,a.jsx)(G.J,{htmlFor:"cat-".concat(e.id),children:e.name})]},e.id)})})}})]})}function Q(){var e,t,r;let{categories:s,categoriesLoading:i}=x(),{brands:l,brandsLoading:o}=function(){let[e,t]=(0,m.useState)([]),[r,a]=(0,m.useState)(!0),[n,s]=(0,m.useState)(!1),i=(0,m.useRef)(null),l=(0,m.useCallback)(async()=>{i.current&&i.current.abort();let e=new AbortController;i.current=e,a(!0),s(!1);try{let r=await fetch("/api/brand",{method:"GET",signal:e.signal});if(!r.ok)throw Error("Failed to fetch brands (".concat(r.status,")"));let a=await r.json();e.signal.aborted||t(a)}catch(t){e.signal.aborted||(console.error("Error fetching brands:",t),s(!0))}finally{var r;(null==(r=i.current)?void 0:r.signal.aborted)||a(!1)}},[]);return(0,m.useEffect)(()=>(l(),()=>{var e;null==(e=i.current)||e.abort()}),[l]),{brands:e,brandsLoading:r,brandsError:n,refresh:l}}(),{register:d,control:c,formState:{errors:u}}=(0,n.xW)();return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1",children:"Name"}),(0,a.jsx)(f.p,{...d("name")}),u.name&&(0,a.jsx)("p",{className:"text-red-600",children:null==(e=u.name.message)?void 0:e.toString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1",children:"Slug"}),(0,a.jsx)(f.p,{...d("slug")}),u.slug&&(0,a.jsx)("p",{className:"text-red-600",children:null==(t=u.slug.message)?void 0:t.toString()})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1",children:"Description"}),(0,a.jsx)(v,{...d("description"),rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1",children:"Main Category"}),(0,a.jsx)(n.xI,{name:"categoryId",control:c,render:e=>{let{field:t}=e;return(0,a.jsxs)(p.l6,{disabled:i,onValueChange:e=>t.onChange(e),value:t.value,children:[(0,a.jsx)(p.bq,{className:"w-full",children:(0,a.jsx)(p.yv,{placeholder:"Select category â€¦"})}),(0,a.jsx)(p.gC,{children:s.map(e=>(0,a.jsx)(p.eb,{value:e.id.toString(),children:e.name},e.id))})]})}}),u.categoryId&&(0,a.jsx)("p",{className:"text-red-600",children:null==(r=u.categoryId.message)?void 0:r.toString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-1",children:"Brand (optional)"}),(0,a.jsx)(n.xI,{name:"brandId",control:c,render:e=>{let{field:t}=e;return(0,a.jsxs)(p.l6,{disabled:o,onValueChange:e=>t.onChange(e),value:t.value,children:[(0,a.jsx)(p.bq,{className:"w-full",children:(0,a.jsx)(p.yv,{placeholder:"â€” none â€”"})}),(0,a.jsx)(p.gC,{children:l.map(e=>(0,a.jsx)(p.eb,{value:e.id,children:e.name},e.id))})]})}})]})]}),(0,a.jsx)(W,{categories:s})]})}var $=r(7168),K=r(6766);function B(e){let{value:t,publicId:r,onUploaded:n,onPublicIdChange:s}=e,[i,l]=(0,m.useState)(!1),o=(0,m.useRef)(null);async function d(e){var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;l(!0),r&&await fetch("/api/delete-img",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({public_id:r})});let i=new FormData;i.append("file",a);let o=await fetch("/api/upload",{method:"POST",body:i}),d=await o.json();d.url&&d.public_id&&(n(d.url),s(d.public_id)),l(!1)}return(0,a.jsxs)("div",{className:"space-y-2 flex items-center gap-2",children:[(0,a.jsx)(f.p,{type:"file",accept:"image/*",onChange:d,ref:o,disabled:i}),(0,a.jsx)($.$,{type:"button",onClick:()=>{var e;return null==(e=o.current)?void 0:e.click()},disabled:i,children:i?"Uploading...":t?"Change Image":"Upload Image"}),t&&(0,a.jsx)(K.default,{src:t,alt:"variant",width:60,height:60,className:"rounded shadow"})]})}function J(){let{variantOptionsValues:e,variantOptionsValuesLoading:t}=function(){let[e,t]=(0,m.useState)([]),[r,a]=(0,m.useState)(!0),[n,s]=(0,m.useState)(!1),i=(0,m.useRef)(null),l=(0,m.useCallback)(async()=>{i.current&&i.current.abort();let e=new AbortController;i.current=e,a(!0),s(!1);try{let r=await fetch("/api/variant-options-values",{method:"GET",signal:e.signal});if(!r.ok)throw Error("Failed to fetch variant options (".concat(r.status,")"));let a=await r.json();e.signal.aborted||t(a)}catch(t){e.signal.aborted||(console.error("Error fetching variant options:",t),s(!0))}finally{var r;(null==(r=i.current)?void 0:r.signal.aborted)||a(!1)}},[]);return(0,m.useEffect)(()=>(l(),()=>{var e;null==(e=i.current)||e.abort()}),[l]),{variantOptionsValues:e,variantOptionsValuesLoading:r,variantOptionsValuesError:n,variantOptionsValuesRefresh:l}}(),{control:r,register:s,setValue:i,watch:l}=(0,n.xW)(),{fields:o,append:d,remove:c}=(0,n.jz)({control:r,name:"variants"});return(0,a.jsxs)("div",{children:[o.map((d,u)=>{var m;return(0,a.jsxs)("div",{className:"mb-6 rounded-xl border border-neutral-200 bg-gray-50 p-4 shadow-sm space-y-1",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sku-".concat(d.id),className:"block text-sm font-medium mb-1",children:"SKU"}),(0,a.jsx)(f.p,{id:"sku-".concat(d.id),className:"w-full",...s("variants.".concat(u,".sku")),placeholder:"Enter SKU"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"price-".concat(d.id),className:"block text-sm font-medium mb-1",children:"Price"}),(0,a.jsx)(f.p,{id:"price-".concat(d.id),className:"w-full",type:"number",step:"0.01",...s("variants.".concat(u,".price"),{valueAsNumber:!0}),placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"stockQty-".concat(d.id),className:"block text-sm font-medium mb-1",children:"Qty"}),(0,a.jsx)(f.p,{id:"stockQty-".concat(d.id),className:"w-full",type:"number",...s("variants.".concat(u,".stockQty"),{valueAsNumber:!0}),placeholder:"0"})]}),(0,a.jsx)("div",{})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"imageUrl-".concat(d.id),className:"block text-sm font-medium mb-1",children:"Image URL"}),(0,a.jsx)(n.xI,{name:"variants.".concat(u,".imageUrl"),control:r,render:e=>{let{field:t}=e;return(0,a.jsx)(B,{value:t.value,publicId:l("variants.".concat(u,".publicId")),onUploaded:e=>t.onChange(e),onPublicIdChange:e=>i("variants.".concat(u,".publicId"),e)})}})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:null==(m=o[u].values)?void 0:m.map((s,i)=>{let l=null==e?void 0:e.find(e=>e.id===s.optionId);return l?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:l.name}),(0,a.jsx)(n.xI,{name:"variants.".concat(u,".values.").concat(i,".valueId"),control:r,render:e=>{let{field:r}=e;return(0,a.jsxs)(p.l6,{disabled:t,value:r.value,onValueChange:r.onChange,children:[(0,a.jsx)(p.bq,{className:"w-full",children:(0,a.jsx)(p.yv,{placeholder:"Select ".concat(l.name)})}),(0,a.jsx)(p.gC,{children:l.values.map(e=>(0,a.jsx)(p.eb,{value:e.id,children:e.value},e.id))})]})}})]},l.id):null})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)($.$,{type:"button",variant:"destructive",size:"sm",onClick:()=>c(u),children:"Remove"})})]},d.id)}),(0,a.jsx)($.$,{size:"xsm",type:"button",variant:"outline",className:"",onClick:()=>d({sku:"",price:0,stockQty:0,imageUrl:"",values:(e||[]).map(e=>({optionId:e.id,valueId:""}))}),disabled:!(null==e?void 0:e.length),children:"+ Add Variant"})]})}var X=r(6671),Z=r(5695);function H(){let e=(0,Z.useRouter)(),t=(0,n.mN)({resolver:(0,s.u)(u),defaultValues:{variants:[]}}),{handleSubmit:r}=t,i=async t=>{await l(t),X.oR.success("Product created successfully"),e.refresh()};return console.log(t.formState.errors),(0,a.jsx)(n.Op,{...t,children:(0,a.jsxs)("form",{onSubmit:r(i),className:"space-y-2",children:[(0,a.jsx)(Q,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium mb-2",children:"Variants"}),(0,a.jsx)(J,{})]}),(0,a.jsx)($.$,{className:"w-full",type:"submit",children:"Create Product"})]})})}},8905:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var a=r(2115),n=r(6101),s=r(2712),i=e=>{let{present:t,children:r}=e,i=function(e){var t,r;let[n,i]=a.useState(),o=a.useRef(null),d=a.useRef(e),c=a.useRef("none"),[u,m]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},a.useReducer((e,t)=>{let a=r[e][t];return null!=a?a:e},t));return a.useEffect(()=>{let e=l(o.current);c.current="mounted"===u?e:"none"},[u]),(0,s.N)(()=>{let t=o.current,r=d.current;if(r!==e){let a=c.current,n=l(t);e?m("MOUNT"):"none"===n||(null==t?void 0:t.display)==="none"?m("UNMOUNT"):r&&a!==n?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,s.N)(()=>{if(n){var e;let t,r=null!=(e=n.ownerDocument.defaultView)?e:window,a=e=>{let a=l(o.current).includes(e.animationName);if(e.target===n&&a&&(m("ANIMATION_END"),!d.current)){let e=n.style.animationFillMode;n.style.animationFillMode="forwards",t=r.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=e)})}},s=e=>{e.target===n&&(c.current=l(o.current))};return n.addEventListener("animationstart",s),n.addEventListener("animationcancel",a),n.addEventListener("animationend",a),()=>{r.clearTimeout(t),n.removeEventListener("animationstart",s),n.removeEventListener("animationcancel",a),n.removeEventListener("animationend",a)}}m("ANIMATION_END")},[n,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:a.useCallback(e=>{o.current=e?getComputedStyle(e):null,i(e)},[])}}(t),o="function"==typeof r?r({present:i.isPresent}):a.Children.only(r),d=(0,n.s)(i.ref,function(e){var t,r;let a=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=a&&"isReactWarning"in a&&a.isReactWarning;return n?e.ref:(n=(a=null==(r=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:r.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref}(o));return"function"==typeof r||i.isPresent?a.cloneElement(o,{ref:d}):null};function l(e){return(null==e?void 0:e.animationName)||"none"}i.displayName="Presence"},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var a=r(5933),n=r(5155),s=r(2115),i=r(3999),l=r(2942),o=r(5666),d=r(5615);function c(){let e=(0,a._)(["\n            radial-gradient(\n              "," circle at ","px ","px,\n              #3b82f6,\n              transparent 80%\n            )\n          "]);return c=function(){return e},e}let u=s.forwardRef((e,t)=>{let{className:r,type:a,...u}=e,[m,p]=s.useState(!1),f=(0,l.d)(0),g=(0,l.d)(0);return(0,n.jsx)(o.P.div,{style:{background:(0,d.E)(c(),m?"100px":"0px",f,g)},onMouseMove:function(e){let{left:t,top:r}=e.currentTarget.getBoundingClientRect();f.set(e.clientX-t),g.set(e.clientY-r)},onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),className:"group/input rounded-lg p-[2px] transition duration-300 border ",children:(0,n.jsx)("input",{type:a,className:(0,i.cn)("shadow-input dark:placeholder-text-neutral-600 flex h-10 w-full rounded-md border-none bg-gray-50 px-3 py-2 text-sm text-black transition duration-400 group-hover/input:shadow-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 focus-visible:ring-[2px] focus-visible:ring-neutral-400 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800 dark:text-white dark:shadow-[0px_0px_1px_1px_#404040] dark:focus-visible:ring-neutral-600",r),ref:t,...u})})});u.displayName="Input"}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,5666,3063,4440,3984,4511,3457,8441,1684,7358],()=>t(2068)),_N_E=e.O()}]);