(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8279],{1350:(e,t,r)=>{"use strict";r.d(t,{CheckoutForm:()=>h});var a=r(5155),s=r(2177),n=r(221),i=r(9852),l=r(7168),o=r(5594);let d=o.z.object({fullName:o.z.string().min(2,"Enter your name"),email:o.z.string().email("Invalid email"),phone:o.z.string().min(7,"Enter a valid phone"),address1:o.z.string().min(3,"Required"),address2:o.z.string().optional(),city:o.z.string().min(2,"Required"),postalCode:o.z.string().min(3,"Required"),country:o.z.string().min(2,"Required"),password:o.z.string().min(6,"At least 6 chars").optional(),createAccount:o.z.boolean().optional()});var u=r(6515),c=r(6874),p=r.n(c),m=r(2115),x=r(9917);function h(e){var t,r,o,c;let{initialValues:h,isLoggedIn:f}=e,{cart:v}=(0,u._)(),{register:g,handleSubmit:b,formState:{errors:y}}=(0,s.mN)({resolver:(0,n.u)(d),defaultValues:{email:null!=(t=h.email)?t:"",phone:null!=(r=h.phone)?r:""}}),[j,w]=(0,m.useState)(!1),[N,k]=(0,m.useState)(!1),C=async e=>{let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:e,items:v})}),r=await t.json();r.url?window.location.href=r.url:alert(r.error||"Checkout failed")};return console.log(y),(0,a.jsxs)("form",{onSubmit:b(C),className:"space-y-4 max-w-md mx-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.p,{...g("fullName"),placeholder:"Full Name"}),y.fullName&&(0,a.jsx)("div",{className:"text-destructive text-xs",children:y.fullName.message})]}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.p,{...g("phone"),placeholder:"Phone",disabled:f&&!N,defaultValue:null!=(o=h.phone)?o:"",className:f&&!N?"bg-gray-100 cursor-not-allowed":""}),f&&!N&&(0,a.jsx)("button",{type:"button",onClick:()=>k(!0),className:"absolute right-2 top-2 p-1 text-gray-400 hover:text-blue-600",tabIndex:-1,"aria-label":"Edit phone",children:(0,a.jsx)(x.A,{size:16})}),f&&N&&(0,a.jsx)("div",{className:"text-yellow-600 text-xs mt-1",children:"This will become your new login phone number for future sign-in."}),y.phone?(0,a.jsx)("div",{className:"text-destructive text-xs",children:y.phone.message}):!N&&f&&(0,a.jsx)("div",{className:"text-muted-foreground text-xs mt-1",children:"To change your login phone number, click the edit icon."})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.p,{...g("email"),type:"email",placeholder:"Email",disabled:f&&!j,defaultValue:null!=(c=h.email)?c:"",className:f&&!j?"bg-gray-100 cursor-not-allowed":""}),f&&!j&&(0,a.jsx)("button",{type:"button",onClick:()=>w(!0),className:"absolute right-2 top-2 p-1 text-gray-400 hover:text-blue-600",tabIndex:-1,"aria-label":"Edit email",children:(0,a.jsx)(x.A,{size:16})}),f&&j&&(0,a.jsx)("div",{className:"text-yellow-600 text-xs mt-1",children:"This will become your new login email for future sign-in."}),y.email?(0,a.jsx)("div",{className:"text-destructive text-xs",children:y.email.message}):!j&&f&&(0,a.jsx)("div",{className:"text-muted-foreground text-xs mt-1",children:"To change your login email, click the edit icon."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.p,{...g("address1"),placeholder:"Address Line 1"}),y.address1&&(0,a.jsx)("div",{className:"text-destructive text-xs",children:y.address1.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.p,{...g("address2"),placeholder:"Address Line 2 (optional)"}),y.address2&&(0,a.jsx)("div",{className:"text-destructive text-xs",children:y.address2.message})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.p,{...g("city"),placeholder:"City",className:"flex-1"}),(0,a.jsx)(i.p,{...g("postalCode"),placeholder:"Postal Code",className:"flex-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.p,{...g("country"),placeholder:"Country"}),y.country&&(0,a.jsx)("div",{className:"text-destructive text-xs",children:y.country.message})]}),!f&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-destructive",children:["If you have an account, please"," ",(0,a.jsx)(p(),{className:"text-blue-500 underline",href:"/login",children:"login"})," ","instead of creating a new account."]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.p,{...g("password"),type:"password",placeholder:"Password",required:!f}),y.password&&(0,a.jsx)("div",{className:"text-destructive text-xs",children:y.password.message})]})]}),(0,a.jsx)(l.$,{type:"submit",className:"w-full mt-2",children:"Continue to Payment"})]})}},3224:(e,t,r)=>{Promise.resolve().then(r.bind(r,1350))},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2596),s=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},6515:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>l,_:()=>o});var a=r(5155),s=r(2115);let n=(0,s.createContext)(void 0);function i(e){return"object"==typeof e&&null!==e&&"string"==typeof e.productId&&"string"==typeof e.variantId&&"string"==typeof e.name&&"number"==typeof e.price&&"string"==typeof e.sku&&"number"==typeof e.quantity}let l=e=>{let{children:t}=e,[r,l]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{let t=JSON.parse(e);Array.isArray(t)&&t.every(i)?l(t):l([])}catch(e){l([])}},[]),(0,s.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(r))},[r]),(0,a.jsx)(n.Provider,{value:{cart:r,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;l(a=>a.find(e=>e.variantId===r.id)?a.map(e=>e.variantId===r.id?{...e,quantity:e.quantity+t}:e):[...a,{productId:e.id,variantId:r.id,name:e.name,price:parseInt(r.price,10),sku:r.sku,imageUrl:r.imageUrl,options:r.options,quantity:t}])},removeFromCart:e=>{l(t=>t.filter(t=>t.variantId!==e))},clearCart:()=>{l([]),localStorage.removeItem("cart")},updateQuantity:(e,t)=>{l(r=>r.map(r=>r.variantId===e?{...r,quantity:t}:r))}},children:t})};function o(){let e=(0,s.useContext)(n);if(!e)throw Error("useCart must be used within CartProvider");return e}},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let a=r(2115);function s(e,t){let r=(0,a.useRef)(null),s=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=n(e,a)),t&&(s.current=n(t,a))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var a=r(5155);r(2115);var s=r(9708),n=r(2085),i=r(3999);let l=(0,n.F)("hover:curser-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xsm:"h-6 px-2 py-1 text-xs",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:n,asChild:o=!1,...d}=e,u=o?s.Slot:"button";return(0,a.jsx)(u,{"data-slot":"button",className:(0,i.cn)(l({variant:r,size:n,className:t}),"hover:cursor-pointer"),...d})}},9852:(e,t,r)=>{"use strict";r.d(t,{p:()=>c});var a=r(5933),s=r(5155),n=r(2115),i=r(3999),l=r(2942),o=r(5666),d=r(5615);function u(){let e=(0,a._)(["\n            radial-gradient(\n              "," circle at ","px ","px,\n              #3b82f6,\n              transparent 80%\n            )\n          "]);return u=function(){return e},e}let c=n.forwardRef((e,t)=>{let{className:r,type:a,...c}=e,[p,m]=n.useState(!1),x=(0,l.d)(0),h=(0,l.d)(0);return(0,s.jsx)(o.P.div,{style:{background:(0,d.E)(u(),p?"100px":"0px",x,h)},onMouseMove:function(e){let{left:t,top:r}=e.currentTarget.getBoundingClientRect();x.set(e.clientX-t),h.set(e.clientY-r)},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),className:"group/input rounded-lg p-[2px] transition duration-300 border ",children:(0,s.jsx)("input",{type:a,className:(0,i.cn)("shadow-input dark:placeholder-text-neutral-600 flex h-10 w-full rounded-md border-none bg-gray-50 px-3 py-2 text-sm text-black transition duration-400 group-hover/input:shadow-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 focus-visible:ring-[2px] focus-visible:ring-neutral-400 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800 dark:text-white dark:shadow-[0px_0px_1px_1px_#404040] dark:focus-visible:ring-neutral-600",r),ref:t,...c})})});c.displayName="Input"},9917:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:u="",children:c,iconNode:p,...m}=e;return(0,a.createElement)("svg",{ref:t,...d,width:s,height:s,stroke:r,strokeWidth:i?24*Number(n)/Number(s):n,className:l("lucide",u),...!c&&!o(m)&&{"aria-hidden":"true"},...m},[...p.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...d}=r;return(0,a.createElement)(u,{ref:n,iconNode:t,className:l("lucide-".concat(s(i(e))),"lucide-".concat(e),o),...d})});return r.displayName=i(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,5666,6874,3984,8441,1684,7358],()=>t(3224)),_N_E=e.O()}]);