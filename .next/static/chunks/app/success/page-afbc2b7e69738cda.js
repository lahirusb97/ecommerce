(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5582],{1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return d},getImageProps:function(){return o}});let a=r(8229),i=r(8883),s=r(3063),n=a._(r(1193));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let d=s.Image},3485:(e,t,r)=>{Promise.resolve().then(r.bind(r,8861))},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2596),i=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,a.$)(t))}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},6515:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>o,_:()=>d});var a=r(5155),i=r(2115);let s=(0,i.createContext)(void 0);function n(e){return"object"==typeof e&&null!==e&&"string"==typeof e.productId&&"string"==typeof e.variantId&&"string"==typeof e.name&&"number"==typeof e.price&&"string"==typeof e.sku&&"number"==typeof e.quantity}let o=e=>{let{children:t}=e,[r,o]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{let t=JSON.parse(e);Array.isArray(t)&&t.every(n)?o(t):o([])}catch(e){o([])}},[]),(0,i.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(r))},[r]),(0,a.jsx)(s.Provider,{value:{cart:r,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2?arguments[2]:void 0;o(a=>a.find(e=>e.variantId===r.id)?a.map(e=>e.variantId===r.id?{...e,quantity:e.quantity+t}:e):[...a,{productId:e.id,variantId:r.id,name:e.name,price:parseInt(r.price,10),sku:r.sku,imageUrl:r.imageUrl,options:r.options,quantity:t}])},removeFromCart:e=>{o(t=>t.filter(t=>t.variantId!==e))},clearCart:()=>{o([]),localStorage.removeItem("cart")},updateQuantity:(e,t)=>{o(r=>r.map(r=>r.variantId===e?{...r,quantity:t}:r))}},children:t})};function d(){let e=(0,i.useContext)(s);if(!e)throw Error("useCart must be used within CartProvider");return e}},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var a=r(1469),i=r.n(a)},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var a=r(5155);r(2115);var i=r(9708),s=r(2085),n=r(3999);let o=(0,s.F)("hover:curser-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xsm:"h-6 px-2 py-1 text-xs",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:s,asChild:d=!1,...c}=e,u=d?i.Slot:"button";return(0,a.jsx)(u,{"data-slot":"button",className:(0,n.cn)(o({variant:r,size:s,className:t}),"hover:cursor-pointer"),...c})}},8145:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var a=r(5155);r(2115);var i=r(9708),s=r(2085),n=r(3999);let o=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,asChild:s=!1,...d}=e,c=s?i.Slot:"span";return(0,a.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(o({variant:r}),t),...d})}},8861:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),i=r(5695),s=r(2115),n=r(6766),o=r(8145),d=r(6515),c=r(7168);function u(){let{clearCart:e}=(0,d._)(),t=(0,i.useRouter)(),r=(0,i.useSearchParams)().get("session_id"),[u,l]=(0,s.useState)(null),[v,m]=(0,s.useState)(!0);if((0,s.useEffect)(()=>{r?fetch("/api/stripe-session?session_id=".concat(r)).then(e=>e.json()).then(e=>{l(e),m(!1)}):m(!1)},[r]),(0,s.useEffect)(()=>{u&&e()},[u]),v)return(0,a.jsx)("div",{className:"py-20 text-center",children:"Loading your receiptâ€¦"});if(!u)return(0,a.jsx)("div",{className:"py-20 text-center text-red-500",children:"No payment info found."});let f=(e,t)=>"".concat(t," ").concat((e/100).toLocaleString("en-LK"));return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto mt-16 p-6 bg-white rounded-lg shadow border",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-primary mb-2",children:"Payment Successful!"}),(0,a.jsx)("p",{className:"mb-6 text-muted-foreground",children:"Thank you for your purchase. Your order details are below."}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"mb-2 font-semibold",children:"Customer:"}),u.customer_details?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:u.customer_details.name}),(0,a.jsx)("div",{className:"text-muted-foreground",children:u.customer_details.email})]}):(0,a.jsx)("div",{children:"Customer info unavailable"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("div",{className:"mb-2 font-semibold",children:"Order:"}),u.line_items&&(0,a.jsx)("ul",{className:"space-y-3",children:u.line_items.data.map(e=>{var t,r,i,s,d;return(0,a.jsxs)("li",{className:"flex items-center gap-4 bg-gray-50 rounded p-2",children:[(null==(i=e.price)||null==(r=i.product)||null==(t=r.images)?void 0:t[0])&&(0,a.jsx)(n.default,{src:e.price.product.images[0],alt:e.description,width:56,height:56,className:"object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold",children:e.description}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Qty: ",e.quantity]}),(null==(s=e.price.product.metadata)?void 0:s.brand)&&(0,a.jsx)(o.E,{className:"mr-1",children:e.price.product.metadata.brand}),(null==(d=e.price.product.metadata)?void 0:d.category)&&(0,a.jsx)(o.E,{variant:"outline",children:e.price.product.metadata.category})]}),(0,a.jsx)("div",{className:"font-semibold text-primary",children:f(e.amount_total,u.currency)})]},e.id)})})]}),(0,a.jsx)("div",{className:"border-t pt-4 mt-8 text-right",children:(0,a.jsxs)("span",{className:"text-lg font-bold",children:["Total: ",f(u.amount_total,u.currency)]})}),(0,a.jsx)(c.$,{onClick:()=>t.push("/"),className:"mt-6",variant:"default",children:"Back to Shop"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9352,3063,8441,1684,7358],()=>t(3485)),_N_E=e.O()}]);