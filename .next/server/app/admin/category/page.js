(()=>{var e={};e.id=915,e.ids=[915],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3402:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(65239),a=s(48088),n=s(88170),i=s.n(n),o=s(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["admin",{children:["category",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,97276)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\category\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\category\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/category/page",pathname:"/admin/category",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7066:e=>{"use strict";e.exports=require("node:tty")},7570:(e,t,s)=>{Promise.resolve().then(s.bind(s,39257)),Promise.resolve().then(s.bind(s,68674)),Promise.resolve().then(s.bind(s,44219))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},39257:(e,t,s)=>{"use strict";s.d(t,{default:()=>h});var r=s(60687),a=s(43210),n=s(16189),i=s(68988),o=s(24934),l=s(13964);let d=(0,s(62688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var c=s(57175),m=s(88233),u=s(6475);let x=(0,u.createServerReference)("402bc8c7aaca9439cf75d631a296895e2be49bc2b3",u.callServer,void 0,u.findSourceMapURL,"updateCategory"),p=(0,u.createServerReference)("4098d47aec97ddc85195d5f6e9b6d9d666354b8286",u.callServer,void 0,u.findSourceMapURL,"deleteCategory");function h({categories:e}){let t=(0,n.useRouter)(),[s,u]=(0,a.useTransition)(),[h,g]=(0,a.useState)(null),[f,v]=(0,a.useState)(""),[j,b]=(0,a.useState)(null),[y,N]=(0,a.useState)(""),C=(e,t)=>{b(null),g(e),v(t)},w=async()=>{if(!h)return;let s=e.find(e=>e.id.toString()===h);s&&(await x({id:h,name:f,slug:s.slug,parentId:s.parentId?s.parentId.toString():null}),g(null),u(()=>t.refresh()))},S=()=>{g(null)},z=async e=>{confirm("Delete this category?")&&(await p({id:e}),u(()=>t.refresh()))},k=(e,t)=>{g(null),b(t.id.toString()),N(t.name)},A=async()=>{if(!j)return;let s=null,r="";e.forEach(e=>{let t=e.children.find(e=>e.id.toString()===j);t&&(s=e.id.toString(),r=t.slug)}),s&&(await x({id:j,name:y,slug:r,parentId:s}),b(null),u(()=>t.refresh()))},P=()=>{b(null)},q=async e=>{confirm("Delete this subcategory?")&&(await p({id:e}),u(()=>t.refresh()))};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"md:hidden space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"p-4 bg-background rounded-lg shadow-sm border",children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-2",children:h===e.id.toString()?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.p,{value:f,onChange:e=>v(e.target.value),className:"h-8"}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:w,disabled:s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:S,disabled:s,children:(0,r.jsx)(d,{className:"h-4 w-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:()=>C(e.id.toString(),e.name),children:(0,r.jsx)(c.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"destructive",onClick:()=>z(e.id.toString()),children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]})}),e.children.length>0?(0,r.jsx)("ul",{className:"mt-2 list-disc list-inside text-sm text-muted-foreground space-y-1",children:e.children.map(t=>(0,r.jsx)("li",{className:"flex justify-between items-center",children:j===t.id.toString()?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.p,{value:y,onChange:e=>N(e.target.value),className:"h-7"}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:A,disabled:s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:P,disabled:s,children:(0,r.jsx)(d,{className:"h-4 w-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:t.name}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:()=>k(e.id.toString(),t),children:(0,r.jsx)(c.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"destructive",onClick:()=>q(t.id.toString()),children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]})},t.id.toString()))}):(0,r.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"No subcategories"})]},e.id.toString()))}),(0,r.jsx)("div",{className:"hidden md:block overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-border bg-background rounded-lg",children:[(0,r.jsx)("thead",{className:"bg-muted text-left",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 text-sm font-semibold text-foreground",children:"Category"}),(0,r.jsx)("th",{className:"p-3 text-sm font-semibold text-foreground",children:"Subcategories"}),(0,r.jsx)("th",{className:"p-3 text-sm font-semibold text-foreground text-right",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-border",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-accent/10 transition-colors",children:[(0,r.jsx)("td",{className:"p-3 text-sm",children:h===e.id.toString()?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.p,{value:f,onChange:e=>v(e.target.value),className:"h-8"}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:w,disabled:s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:S,disabled:s,children:(0,r.jsx)(d,{className:"h-4 w-4"})})]}):e.name}),(0,r.jsx)("td",{className:"p-3 text-sm",children:e.children.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.children.map(t=>(0,r.jsx)("span",{className:"inline-flex items-center space-x-1",children:j===t.id.toString()?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(i.p,{value:y,onChange:e=>N(e.target.value),className:"h-7"}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:A,disabled:s,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:P,disabled:s,children:(0,r.jsx)(d,{className:"h-4 w-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:t.name}),(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:()=>k(e.id.toString(),t),children:(0,r.jsx)(c.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"destructive",onClick:()=>q(t.id.toString()),children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})},t.id.toString()))}):(0,r.jsx)("span",{className:"text-muted-foreground",children:"â€”"})}),(0,r.jsx)("td",{className:"p-3 text-right space-x-2",children:h!==e.id.toString()&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.$,{size:"xsm",variant:"outline",onClick:()=>C(e.id.toString(),e.name),children:(0,r.jsx)(c.A,{className:"h-4 w-4"})}),(0,r.jsx)(o.$,{size:"xsm",variant:"destructive",onClick:()=>z(e.id.toString()),children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})})]},e.id.toString()))})]})})]})}},44219:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var r=s(60687),a=s(45880),n=s(43210),i=s(27605),o=s(63442),l=s(16189),d=s(68988),c=s(24934),m=s(63974),u=s(52581);let x=a.z.object({name:a.z.string().min(1,"Name is required"),slug:a.z.string().min(1,"Slug is required"),parentId:a.z.coerce.number().optional()});function p({categories:e}){let t=(0,l.useRouter)(),[s,a]=(0,n.useTransition)(),{register:p,handleSubmit:h,control:g,formState:{errors:f}}=(0,i.mN)({resolver:(0,o.u)(x)});async function v(e){a(async()=>{let s=await fetch("/api/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await s.json();s.ok?(u.oR.success("Subcategory created successfully"),t.refresh()):u.oR.error(r.error||"Something went wrong")})}return(0,r.jsxs)("form",{onSubmit:h(v),className:"space-y-4 max-w-md",children:[(0,r.jsx)(d.p,{placeholder:"Name",...p("name"),className:f.name&&"border-red-500"}),f.name&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:f.name.message}),(0,r.jsx)(d.p,{placeholder:"Slug",...p("slug"),className:f.slug&&"border-red-500"}),f.slug&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:f.slug.message}),(0,r.jsx)(i.xI,{control:g,name:"parentId",render:({field:{onChange:t,value:s}})=>(0,r.jsxs)(m.l6,{onValueChange:t,value:s?.toString(),children:[(0,r.jsx)(m.bq,{children:(0,r.jsx)(m.yv,{placeholder:"Select parent category"})}),(0,r.jsx)(m.gC,{children:e.map(e=>(0,r.jsx)(m.eb,{value:e.id.toString(),children:e.name},e.id))})]})}),(0,r.jsx)(c.$,{type:"submit",disabled:s,children:s?"Creating...":"Create Subcategory"})]})}},48161:e=>{"use strict";e.exports=require("node:os")},48829:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\nextjs\\\\e-commerce-store\\\\my-app\\\\app\\\\admin\\\\category\\\\CreateSubCategoryForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\category\\CreateSubCategoryForm.tsx","default")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,s)=>{"use strict";s.d(t,{bq:()=>m,eb:()=>x,gC:()=>u,l6:()=>d,yv:()=>c});var r=s(60687);s(43210);var a=s(25911),n=s(78272),i=s(13964),o=s(3589),l=s(96241);function d({...e}){return(0,r.jsx)(a.bL,{"data-slot":"select",...e})}function c({...e}){return(0,r.jsx)(a.WT,{"data-slot":"select-value",...e})}function m({className:e,size:t="default",children:s,...i}){return(0,r.jsxs)(a.l9,{"data-slot":"select-trigger","data-size":t,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...i,children:[s,(0,r.jsx)(a.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function u({className:e,children:t,position:s="popper",...n}){return(0,r.jsx)(a.ZL,{children:(0,r.jsxs)(a.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...n,children:[(0,r.jsx)(p,{}),(0,r.jsx)(a.LM,{className:(0,l.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,r.jsx)(h,{})]})})}function x({className:e,children:t,...s}){return(0,r.jsxs)(a.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(a.VF,{children:(0,r.jsx)(i.A,{className:"size-4"})})}),(0,r.jsx)(a.p4,{children:t})]})}function p({className:e,...t}){return(0,r.jsx)(a.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(o.A,{className:"size-4"})})}function h({className:e,...t}){return(0,r.jsx)(a.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,r.jsx)(n.A,{className:"size-4"})})}},67818:(e,t,s)=>{Promise.resolve().then(s.bind(s,98689)),Promise.resolve().then(s.bind(s,70212)),Promise.resolve().then(s.bind(s,48829))},68674:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var r=s(60687),a=s(43210),n=s(16189),i=s(68988),o=s(24934),l=s(27605),d=s(63442),c=s(45880);let m=c.z.object({name:c.z.string().min(1),slug:c.z.string().min(1),parentId:c.z.number().optional()});var u=s(52581);function x(){let e=(0,n.useRouter)(),[t,s]=(0,a.useTransition)(),{register:c,handleSubmit:x,formState:{errors:p},reset:h}=(0,l.mN)({resolver:(0,d.u)(m.pick({name:!0,slug:!0}))});async function g(t){s(async()=>{let s=await fetch("/api/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});s.ok?(h(),u.oR.success("Main category created successfully"),e.refresh()):409===s.status?u.oR.error("Category already exists"):u.oR.error("Failed to create category")})}return(0,r.jsxs)("form",{onSubmit:x(g),className:"space-y-4",children:[(0,r.jsx)(i.p,{placeholder:"Category Name",...c("name")}),p.name&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:p.name.message}),(0,r.jsx)(i.p,{placeholder:"Slug (e.g., men)",...c("slug")}),p.slug&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:p.slug.message}),(0,r.jsx)(o.$,{type:"submit",disabled:t,children:t?"Creating...":"Create Main Category"})]})}},68857:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"402bc8c7aaca9439cf75d631a296895e2be49bc2b3":()=>o,"4098d47aec97ddc85195d5f6e9b6d9d666354b8286":()=>i});var r=s(91199);s(42087);var a=s(28953),n=s(7944);async function i({id:e}){await a.z.category.delete({where:{id:BigInt(e)}}),(0,n.revalidatePath)("/admin/categories")}async function o({id:e,name:t,slug:s,parentId:r}){await a.z.category.update({where:{id:BigInt(e)},data:{name:t,slug:s,parentId:r?BigInt(r):null}}),(0,n.revalidatePath)("/admin/category")}(0,s(33331).D)([i,o]),(0,r.A)(i,"4098d47aec97ddc85195d5f6e9b6d9d666354b8286",null),(0,r.A)(o,"402bc8c7aaca9439cf75d631a296895e2be49bc2b3",null)},70212:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\nextjs\\\\e-commerce-store\\\\my-app\\\\app\\\\admin\\\\category\\\\CreateMainCategoryForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\category\\CreateMainCategoryForm.tsx","default")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},97276:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(37413);s(61120);var a=s(70212),n=s(48829),i=s(79464),o=s(98689);async function l(){let e=await i.z.category.findMany({where:{parentId:null},orderBy:{name:"asc"},include:{children:{orderBy:{name:"asc"}}}});return(0,r.jsxs)("div",{children:[(0,r.jsx)(a.default,{}),(0,r.jsx)(n.default,{categories:e}),(0,r.jsx)(o.default,{categories:e})]})}},98689:(e,t,s)=>{"use strict";s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\nextjs\\\\e-commerce-store\\\\my-app\\\\app\\\\admin\\\\category\\\\CategoryTable.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\category\\CategoryTable.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4243,4553,4999,5473,1658,310,2105,6614,262,9464,5962,3240],()=>s(3402));module.exports=r})();