(()=>{var e={};e.id=7905,e.ids=[7905],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27641:(e,r,s)=>{"use strict";s.r(r),s.d(r,{"400976268f19c188f5d1016ac9199b6cdb1026c1d6":()=>c,"40b1175522c68113595de60b8d5710161d4526816f":()=>d,"40bcb4ce1d3e87e42ad09a79c99307c89e1ebc023f":()=>o});var t=s(91199);s(42087);var a=s(28953),n=s(7944),i=s(55365);async function d({name:e,slug:r}){try{return await a.z.brand.create({data:{name:e,slug:r}}),(0,n.revalidatePath)("/admin/brands"),{success:!0}}catch(e){if((0,i.A)(e)&&"P2002"===e.code)return{success:!1,error:"That slug is already in use. Please choose another."};return{success:!1,error:"Failed to create brand. Please try again."}}}async function c({id:e,name:r,slug:s}){try{await a.z.brand.update({where:{id:BigInt(e)},data:{name:r,slug:s}}),(0,n.revalidatePath)("/admin/brands")}catch(e){if((0,i.A)(e)&&"P2002"===e.code)return{success:!1,error:"That slug is already in use. Please choose another."};return{success:!1,error:"Failed to update brand. Please try again."}}}async function o({id:e}){try{await a.z.brand.delete({where:{id:BigInt(e)}}),(0,n.revalidatePath)("/admin/brands")}catch(e){if((0,i.A)(e)&&"P2025"===e.code)return{success:!1,error:"This brand no longer exists."};return{success:!1,error:"Failed to delete brand. Please try again."}}}(0,s(33331).D)([d,c,o]),(0,t.A)(d,"40b1175522c68113595de60b8d5710161d4526816f",null),(0,t.A)(c,"400976268f19c188f5d1016ac9199b6cdb1026c1d6",null),(0,t.A)(o,"40bcb4ce1d3e87e42ad09a79c99307c89e1ebc023f",null)},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},34348:(e,r,s)=>{"use strict";s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\nextjs\\\\e-commerce-store\\\\my-app\\\\app\\\\admin\\\\brands\\\\BrandList.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\brands\\BrandList.tsx","default")},34942:(e,r,s)=>{Promise.resolve().then(s.bind(s,42027))},37630:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>o});var t=s(65239),a=s(48088),n=s(88170),i=s.n(n),d=s(30893),c={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);s.d(r,c);let o={children:["",{children:["admin",{children:["brands",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,75846)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\brands\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\brands\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/brands/page",pathname:"/admin/brands",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},42027:(e,r,s)=>{"use strict";s.d(r,{default:()=>f});var t=s(60687),a=s(43210),n=s(16189),i=s(55192),d=s(24934),c=s(68988),o=s(6475);let l=(0,o.createServerReference)("40b1175522c68113595de60b8d5710161d4526816f",o.callServer,void 0,o.findSourceMapURL,"createBrand"),u=(0,o.createServerReference)("400976268f19c188f5d1016ac9199b6cdb1026c1d6",o.callServer,void 0,o.findSourceMapURL,"updateBrand"),p=(0,o.createServerReference)("40bcb4ce1d3e87e42ad09a79c99307c89e1ebc023f",o.callServer,void 0,o.findSourceMapURL,"deleteBrand");var m=s(57175),x=s(88233),h=s(52581);function f({initialBrands:e}){let r=(0,n.useRouter)(),[s,o]=(0,a.useState)(e),[f,b]=(0,a.useState)(null),g=async e=>{e.preventDefault();let s=new FormData(e.currentTarget);try{await l({name:s.get("name"),slug:s.get("slug")}),h.oR.success("Brand created successfully")}catch(e){e.success||h.oR.error(e.error)}r.refresh()},v=async e=>{e.preventDefault();let s=new FormData(e.currentTarget);try{await u({id:s.get("id"),name:s.get("name"),slug:s.get("slug")}),h.oR.success("Brand updated successfully")}catch(e){e.success||h.oR.error(e.error)}b(null),r.refresh()},j=async e=>{if(confirm("Delete this brand and all its products?")){try{await p({id:e}),h.oR.success("Brand deleted successfully")}catch(e){e.success||h.oR.error(e.error)}r.refresh()}};return(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{className:"text-lg",children:"New Brand"})}),(0,t.jsxs)(i.Wu,{className:"space-y-4",children:[(0,t.jsxs)("form",{onSubmit:g,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("label",{htmlFor:"name",className:"text-sm font-medium",children:"Brand name"}),(0,t.jsx)(c.p,{name:"name",placeholder:"Brand name",required:!0})]}),(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("label",{htmlFor:"slug",className:"text-sm font-medium",children:"URL slug (unique)"}),(0,t.jsx)(c.p,{name:"slug",placeholder:"URL slug (unique)",required:!0})]}),(0,t.jsx)(d.$,{type:"submit",children:"Create"})]}),(0,t.jsx)("hr",{}),(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-muted",children:[(0,t.jsx)("th",{className:"p-2",children:"Name"}),(0,t.jsx)("th",{className:"p-2",children:"Slug"}),(0,t.jsx)("th",{className:"p-2 text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:s.map(e=>f===e.id.toString()?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"p-2",children:(0,t.jsxs)("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,t.jsx)("input",{type:"hidden",name:"id",value:e.id.toString()}),(0,t.jsx)(c.p,{name:"name",defaultValue:e.name,required:!0}),(0,t.jsx)(c.p,{name:"slug",defaultValue:e.slug,required:!0}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(d.$,{type:"submit",size:"xsm",children:"Save"}),(0,t.jsx)(d.$,{type:"button",variant:"outline",size:"xsm",onClick:()=>b(null),children:"Cancel"})]})]})})},e.id.toString()):(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("td",{className:"p-2",children:e.name}),(0,t.jsx)("td",{className:"p-2",children:e.slug}),(0,t.jsxs)("td",{className:"p-2 text-right space-x-2",children:[(0,t.jsx)(d.$,{variant:"outline",size:"xsm",onClick:()=>b(e.id.toString()),children:(0,t.jsx)(m.A,{})}),(0,t.jsx)(d.$,{variant:"destructive",size:"xsm",onClick:()=>j(e.id.toString()),children:(0,t.jsx)(x.A,{})})]})]},e.id.toString()))})]})]})]})}},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},55365:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=e=>e instanceof Error&&"code"in e&&"string"==typeof e.code},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},75846:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d,metadata:()=>i});var t=s(37413),a=s(79464),n=s(34348);let i={title:"Admin â€¢ Brands",description:"Create, update, or delete product brands"};async function d(){let e=await a.z.brand.findMany({orderBy:{name:"asc"}});return(0,t.jsxs)("div",{className:"space-y-6 p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Brands"}),(0,t.jsx)(n.default,{initialBrands:e})]})}},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},88086:(e,r,s)=>{Promise.resolve().then(s.bind(s,34348))}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[4243,4553,4999,5473,1658,310,6614,9464,6909,3240],()=>s(37630));module.exports=t})();