(()=>{var e={};e.id=1625,e.ids=[1625],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14176:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\nextjs\\\\e-commerce-store\\\\my-app\\\\app\\\\admin\\\\products\\\\variant\\\\VariantList.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\products\\variant\\VariantList.tsx","default")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},32473:(e,t,a)=>{Promise.resolve().then(a.bind(a,75343)),Promise.resolve().then(a.bind(a,79623))},33873:e=>{"use strict";e.exports=require("path")},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},57832:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\nextjs\\\\e-commerce-store\\\\my-app\\\\app\\\\admin\\\\products\\\\variant\\\\VariantOptionValueList.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\products\\variant\\VariantOptionValueList.tsx","default")},57975:e=>{"use strict";e.exports=require("node:util")},61810:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=a(65239),r=a(48088),n=a(88170),i=a.n(n),o=a(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let d={children:["",{children:["admin",{children:["products",{children:["variant",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,99262)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\products\\variant\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\nextjs\\e-commerce-store\\my-app\\app\\admin\\products\\variant\\page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/products/variant/page",pathname:"/admin/products/variant",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63974:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>m,gC:()=>p,l6:()=>d,yv:()=>c});var s=a(60687);a(43210);var r=a(25911),n=a(78272),i=a(13964),o=a(3589),l=a(96241);function d({...e}){return(0,s.jsx)(r.bL,{"data-slot":"select",...e})}function c({...e}){return(0,s.jsx)(r.WT,{"data-slot":"select-value",...e})}function u({className:e,size:t="default",children:a,...i}){return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,l.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...i,children:[a,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function p({className:e,children:t,position:a="popper",...n}){return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...n,children:[(0,s.jsx)(x,{}),(0,s.jsx)(r.LM,{className:(0,l.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(h,{})]})})}function m({className:e,children:t,...a}){return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...a,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(i.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:t})]})}function x({className:e,...t}){return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(o.A,{className:"size-4"})})}function h({className:e,...t}){return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,s.jsx)(n.A,{className:"size-4"})})}},73024:e=>{"use strict";e.exports=require("node:fs")},75343:(e,t,a)=>{"use strict";a.d(t,{default:()=>v});var s=a(60687),r=a(43210),n=a(24934),i=a(57175),o=a(88233),l=a(27605),d=a(63442),c=a(68988),u=a(45880);let p=u.z.object({name:u.z.string().min(2,"Option name is required")});var m=a(52581);function x({id:e,initialName:t,colSpan:a,onSaved:r,onCancel:i}){let{register:o,handleSubmit:u,formState:{errors:x,isSubmitting:h},reset:f}=(0,l.mN)({resolver:(0,d.u)(p),defaultValues:{name:t}}),v=async t=>{try{let a=await fetch(`/api/variant-options/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json();if(!a.ok){"string"==typeof s.error&&m.oR.error(s.error);return}f(t),r&&r()}catch{m.oR.error("Failed to update variant option.")}};return(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:a,className:"py-2 px-3 bg-muted",children:(0,s.jsxs)("form",{onSubmit:u(v),className:"flex flex-col md:flex-row gap-2 items-start md:items-center",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(c.p,{placeholder:"Variant Option Name",...o("name"),disabled:h,className:"w-full"}),x.name&&(0,s.jsx)("div",{className:"text-red-500 text-xs mt-1",children:x.name.message})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n.$,{type:"submit",disabled:h,size:"xsm",children:"Save"}),i&&(0,s.jsx)(n.$,{type:"button",variant:"outline",disabled:h,size:"xsm",onClick:i,children:"Cancel"})]})]})})})}function h({onCreated:e}){let{register:t,handleSubmit:a,formState:{errors:r,isSubmitting:i},reset:o}=(0,l.mN)({resolver:(0,d.u)(p),defaultValues:{name:""}}),u=async t=>{try{let a=await fetch("/api/variant-options",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json();if(!a.ok){"string"==typeof s.error&&m.oR.error(s.error);return}o(),e&&e()}catch{m.oR.error("Failed to create variant option.")}};return(0,s.jsx)("div",{className:"py-1 mb-1 px-1 ",children:(0,s.jsxs)("form",{onSubmit:a(u),className:"flex flex-row gap-2 items-center",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(c.p,{placeholder:"Add new variant (e.g. Size, Color)",...t("name"),disabled:i,className:"w-full"}),r.name&&(0,s.jsx)("div",{className:"text-red-500 text-xs mt-1",children:r.name.message})]}),(0,s.jsx)(n.$,{type:"submit",disabled:i,size:"xsm",children:"Add"})]})})}var f=a(55192);function v(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),u=async()=>{c(!0);let e=await fetch("/api/variant-options");t(await e.json()),c(!1)},p=async e=>{if(!window.confirm("Are you sure you want to delete this option?"))return;let t=await fetch(`/api/variant-options/${e}/`,{method:"DELETE"});if(t.ok){m.oR.success("Variant option deleted successfully"),u();return}if(!t.ok){let e=await t.json();"string"==typeof e.error?m.oR.error(e.error):m.oR.error("Failed to delete variant option.")}};return(0,s.jsxs)(f.Zp,{className:"w-full pt-2 md:w-2/3 gap-0 mx-auto shadow-lg rounded-2xl border",children:[(0,s.jsxs)(f.aR,{className:"p-2 flex flex-col",children:[(0,s.jsx)(f.ZB,{className:"text-xl mb-1 tracking-tight text-foreground",children:"Variant Options"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Manage your product variant options (e.g. Size, Color) here."})]}),(0,s.jsxs)(f.Wu,{className:"p-2",children:[(0,s.jsx)(h,{onCreated:u}),(0,s.jsxs)("table",{className:"min-w-full rounded-xl overflow-hidden border bg-background",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-muted rounded-xl text-left",children:[(0,s.jsx)("th",{className:"p-2 font-medium text-sm w-[70%]",children:"Name"}),(0,s.jsx)("th",{className:"p-2 font-medium text-sm text-right w-[30%]",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[0===e.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:2,className:"text-center py-4 text-muted-foreground",children:"No variant options found."})}),e.map(e=>a&&a.id===e.id?(0,s.jsx)(x,{id:e.id.toString(),initialName:e.name,colSpan:2,onSaved:()=>{l(null),u()},onCancel:()=>l(null)},e.id.toString()):(0,s.jsxs)("tr",{className:"border-b last:border-b-0 hover:bg-accent/50 transition",children:[(0,s.jsx)("td",{className:"p-2 align-middle",children:e.name}),(0,s.jsxs)("td",{className:"p-2 text-right flex justify-end gap-1 align-middle",children:[(0,s.jsx)(n.$,{variant:"outline",size:"xsm",className:"border-muted",onClick:()=>l(e),children:(0,s.jsx)(i.A,{className:"w-4 h-4"})}),(0,s.jsx)(n.$,{variant:"destructive",size:"xsm",onClick:()=>p(e.id.toString()),children:(0,s.jsx)(o.A,{className:"w-4 h-4"})})]})]},e.id.toString())),d&&Array.from({length:5}).map((e,t)=>(0,s.jsxs)("tr",{className:"animate-pulse",children:[(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("div",{className:"h-4 bg-muted rounded w-2/3"})}),(0,s.jsx)("td",{className:"p-2 text-right",children:(0,s.jsx)("div",{className:"h-4 bg-muted rounded w-10 ml-auto"})})]},t))]})]})]})]})}},76269:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"4061270d19e6476e80395037b4cbd18851db38e5dd":()=>i,"406aef158459d00ab1dd0d50daf952056c12c41ad3":()=>l,"40bb086bd9dc3117c7feb627c4a2301af4efac776a":()=>o});var s=a(91199);a(42087);var r=a(28953),n=a(7944);async function i({optionId:e,value:t}){await r.z.variantOptionValue.create({data:{optionId:BigInt(e),value:t}})}async function o({id:e,optionId:t,value:a}){await r.z.variantOptionValue.update({where:{id:Number(e)},data:{optionId:t,value:a}})}async function l({id:e}){await r.z.variantOptionValue.delete({where:{id:Number(e)}}),(0,n.revalidatePath)("/admin/variant-option-values")}(0,a(33331).D)([i,o,l]),(0,s.A)(i,"4061270d19e6476e80395037b4cbd18851db38e5dd",null),(0,s.A)(o,"40bb086bd9dc3117c7feb627c4a2301af4efac776a",null),(0,s.A)(l,"406aef158459d00ab1dd0d50daf952056c12c41ad3",null)},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},79623:(e,t,a)=>{"use strict";a.d(t,{default:()=>y});var s=a(60687),r=a(43210),n=a(16189),i=a(55192),o=a(24934),l=a(27605),d=a(6475);let c=(0,d.createServerReference)("4061270d19e6476e80395037b4cbd18851db38e5dd",d.callServer,void 0,d.findSourceMapURL,"createVariantOptionValue");var u=a(68988),p=a(63974);function m({options:e}){let t=(0,n.useRouter)(),{register:a,handleSubmit:r,control:i,reset:d,setValue:m}=(0,l.mN)({defaultValues:{optionId:e[0]?.id?.toString()||"",value:""}}),x=async a=>{await c(a),d({optionId:e[0]?.id?.toString()||"",value:""}),t.refresh()};return(0,s.jsxs)("form",{onSubmit:r(x),className:"flex items-center gap-2 p-0 m-0",style:{minHeight:0},children:[(0,s.jsx)(l.xI,{name:"optionId",control:i,render:({field:t})=>(0,s.jsxs)(p.l6,{value:t.value,onValueChange:e=>m("optionId",e),children:[(0,s.jsx)(p.bq,{className:"w-32 h-8",children:(0,s.jsx)(p.yv,{placeholder:"Select option"})}),(0,s.jsx)(p.gC,{children:e.map(e=>(0,s.jsx)(p.eb,{value:e.id.toString(),children:e.name},e.id))})]})}),(0,s.jsx)(u.p,{...a("value"),placeholder:"New Value",className:"h-8",required:!0}),(0,s.jsx)(o.$,{type:"submit",size:"sm",className:"h-8 px-3",children:"Add"})]})}var x=a(52581);let h=e=>e instanceof Error&&"code"in e&&"string"==typeof e.code;function f({id:e,options:t,initialOptionId:a,initialValue:n,colSpan:i,onSaved:d,onCancel:c,onUpdate:m}){let[f,v]=(0,r.useState)(null),{handleSubmit:b,control:g,register:j,formState:{isSubmitting:y}}=(0,l.mN)({defaultValues:{optionId:a,value:n}}),N=async t=>{v(null);try{await m({id:e.toString(),...t}),d&&d()}catch(e){v(e?.toString()||"Update failed."),h(e)?x.oR.error("string"==typeof e.message?e.message:"Update failed."):x.oR.error("Update failed.")}};return(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:i,className:`bg-muted p-2 transition-colors ${f?"border-2 border-red-500 animate-shake":""}`,children:(0,s.jsxs)("form",{onSubmit:b(N),className:"flex items-center gap-2",children:[(0,s.jsx)(l.xI,{name:"optionId",control:g,render:({field:e})=>(0,s.jsxs)(p.l6,{value:e.value,onValueChange:e.onChange,disabled:y,children:[(0,s.jsx)(p.bq,{className:"w-32 h-8",children:(0,s.jsx)(p.yv,{placeholder:"Option"})}),(0,s.jsx)(p.gC,{children:t.map(e=>(0,s.jsx)(p.eb,{value:e.id.toString(),children:e.name},e.id.toString()))})]})}),(0,s.jsx)(u.p,{...j("value"),placeholder:"Value",className:`h-8 ${f?"border-red-500":""}`,disabled:y}),(0,s.jsx)(o.$,{type:"submit",size:"sm",className:"h-8 px-3",disabled:y,children:"Save"}),(0,s.jsx)(o.$,{type:"button",size:"sm",variant:"outline",className:"h-8 px-3",disabled:y,onClick:c,children:"Cancel"})]})})})}let v=(0,d.createServerReference)("40bb086bd9dc3117c7feb627c4a2301af4efac776a",d.callServer,void 0,d.findSourceMapURL,"updateVariantOptionValue"),b=(0,d.createServerReference)("406aef158459d00ab1dd0d50daf952056c12c41ad3",d.callServer,void 0,d.findSourceMapURL,"deleteVariantOptionValue");var g=a(57175),j=a(88233);function y({initialValues:e,initialOptions:t}){let a=(0,n.useRouter)(),[l,d]=(0,r.useState)(null),c=async({id:e,optionId:t,value:s})=>{await v({id:e,optionId:Number(t),value:s}),a.refresh(),d(null)},u=async e=>{if(confirm("Are you sure you want to delete this variant value?"))try{await b({id:e}),a.refresh(),x.oR.success("Variant value deleted successfully")}catch(e){h(e)?x.oR.error("string"==typeof e.message?e.message:"Delete failed."):x.oR.error("Delete failed.")}};return(0,s.jsxs)(i.Zp,{className:"w-full pt-2 md:w-2/3 gap-0 mx-auto shadow-lg rounded-2xl border",children:[(0,s.jsx)(i.aR,{className:"px-4 pt-0",children:(0,s.jsx)(i.ZB,{className:"text-xl",children:"Variant Option Values"})}),(0,s.jsxs)(i.Wu,{className:"px-4 pb-0 ",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"All values belonging to each product variant option."}),(0,s.jsx)("div",{className:"mb-1",children:(0,s.jsx)(m,{options:t})}),(0,s.jsx)("div",{className:"overflow-x-auto rounded-xl",children:(0,s.jsxs)("table",{className:"w-full text-sm bg-background border rounded-xl",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-muted text-left",children:[(0,s.jsx)("th",{className:"p-2 font-semibold",children:"Option"}),(0,s.jsx)("th",{className:"p-2 font-semibold",children:"Value"}),(0,s.jsx)("th",{className:"p-2 font-semibold text-right",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[0===e.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:3,className:"py-4 text-center text-muted-foreground",children:"No variant option values found."})}),e.map(e=>l===e.id.toString()?(0,s.jsx)(f,{id:e.id.toString(),options:t,initialOptionId:e.optionId.toString(),initialValue:e.value,colSpan:3,onSaved:()=>d(null),onCancel:()=>d(null),onUpdate:c},e.id):(0,s.jsxs)("tr",{className:"border-b last:border-b-0 hover:bg-accent/40 transition",children:[(0,s.jsx)("td",{className:"p-2",children:t.find(t=>t.id===e.optionId)?.name}),(0,s.jsx)("td",{className:"p-2",children:e.value}),(0,s.jsxs)("td",{className:"p-2  text-right",children:[(0,s.jsx)(o.$,{variant:"outline",size:"xsm",className:"mr-1",onClick:()=>d(e.id.toString()),children:(0,s.jsx)(g.A,{className:"w-4 h-4"})}),(0,s.jsx)(o.$,{variant:"destructive",size:"xsm",onClick:()=>u(e.id.toString()),children:(0,s.jsx)(j.A,{className:"w-4 h-4"})})]})]},e.id))]})]})})]})]})}},96025:(e,t,a)=>{Promise.resolve().then(a.bind(a,14176)),Promise.resolve().then(a.bind(a,57832))},99262:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(37413);a(61120);var r=a(14176),n=a(57832),i=a(79464);async function o(){let[e,t]=await Promise.all([i.z.variantOptionValue.findMany({orderBy:{id:"asc"},include:{option:!0}}),i.z.variantOption.findMany({orderBy:{name:"asc"}})]);return(0,s.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row ",children:[(0,s.jsx)(r.default,{}),(0,s.jsx)(n.default,{initialValues:e,initialOptions:t})]})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[4243,4553,4999,5473,1658,310,2105,6614,262,9464,5962,3240],()=>a(61810));module.exports=s})();