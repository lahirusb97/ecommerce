(()=>{var e={};e.id=8279,e.ids=[8279],e.modules={1474:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var s=r(32097),i=r(77968),n=r(81480),a=r(48344);function o(e,...t){let r=e.length;return function(e,t){let r=(0,i.d)(t()),a=()=>r.set(t());return a(),(0,s.E)(()=>{let t=()=>n.Gt.preRender(a,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),(0,n.WG)(a)}}),r}(t.filter(a.S),function(){let s="";for(let i=0;i<r;i++){s+=e[i];let r=t[i];r&&(s+=(0,a.S)(r)?r.get():r)}return s})}},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7056:(e,t,r)=>{Promise.resolve().then(r.bind(r,78923))},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},41904:(e,t,r)=>{Promise.resolve().then(r.bind(r,95631))},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(9277);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},57175:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},57975:e=>{"use strict";e.exports=require("node:util")},61528:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(37413),i=r(44999),n=r(46766),a=r(78923),o=r(79464);async function l(){let e=(await (0,i.UL)()).get("token")?.value,t=null,r=null,l=null;if(e)try{let s=await (0,n.J)(e);if(l=s?.userId?.toString()||null){let e=await o.z.user.findUnique({where:{id:BigInt(l)},select:{email:!0,phone:!0}});e&&(t=e.email??null,r=e.phone??null)}}catch{t=null,r=null,l=null}return console.log(t,r,l),(0,s.jsxs)("div",{className:"py-6 px-2",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Shipping Details"}),(0,s.jsx)(a.CheckoutForm,{initialValues:{email:t??null,phone:r??null},isLoggedIn:!!l},`checkout-form-${t}-${r}-${l}`)]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65490:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),i=r(48088),n=r(88170),a=r.n(n),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,61528)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\checkout\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"C:\\nextjs\\e-commerce-store\\my-app\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\nextjs\\e-commerce-store\\my-app\\app\\checkout\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},68988:(e,t,r)=>{"use strict";r.d(t,{p:()=>d});var s=r(60687),i=r(43210),n=r(96241),a=r(77968),o=r(81005),l=r(1474);let d=i.forwardRef(({className:e,type:t,...r},d)=>{let[c,u]=i.useState(!1),p=(0,a.d)(0),x=(0,a.d)(0);return(0,s.jsx)(o.P.div,{style:{background:(0,l.E)`
            radial-gradient(
              ${c?"100px":"0px"} circle at ${p}px ${x}px,
              #3b82f6,
              transparent 80%
            )
          `},onMouseMove:function(e){let{left:t,top:r}=e.currentTarget.getBoundingClientRect();p.set(e.clientX-t),x.set(e.clientY-r)},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:"group/input rounded-lg p-[2px] transition duration-300 border ",children:(0,s.jsx)("input",{type:t,className:(0,n.cn)("shadow-input dark:placeholder-text-neutral-600 flex h-10 w-full rounded-md border-none bg-gray-50 px-3 py-2 text-sm text-black transition duration-400 group-hover/input:shadow-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-neutral-400 focus-visible:ring-[2px] focus-visible:ring-neutral-400 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 dark:bg-zinc-800 dark:text-white dark:shadow-[0px_0px_1px_1px_#404040] dark:focus-visible:ring-neutral-600",e),ref:d,...r})})});d.displayName="Input"},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},77968:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var s=r(43210),i=r(56923),n=r(53906),a=r(58745);function o(e){let t=(0,n.M)(()=>(0,a.OQ)(e)),{isStatic:r}=(0,s.useContext)(i.Q);if(r){let[,r]=(0,s.useState)(e);(0,s.useEffect)(()=>t.on("change",r),[])}return t}},78474:e=>{"use strict";e.exports=require("node:events")},78923:(e,t,r)=>{"use strict";r.d(t,{CheckoutForm:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call CheckoutForm() from the server but CheckoutForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\nextjs\\e-commerce-store\\my-app\\components\\CheckoutForm.tsx","CheckoutForm")},79551:e=>{"use strict";e.exports=require("url")},95631:(e,t,r)=>{"use strict";r.d(t,{CheckoutForm:()=>h});var s=r(60687),i=r(27605),n=r(63442),a=r(68988),o=r(24934),l=r(45880);let d=l.z.object({fullName:l.z.string().min(2,"Enter your name"),email:l.z.string().email("Invalid email"),phone:l.z.string().min(7,"Enter a valid phone"),address1:l.z.string().min(3,"Required"),address2:l.z.string().optional(),city:l.z.string().min(2,"Required"),postalCode:l.z.string().min(3,"Required"),country:l.z.string().min(2,"Required"),password:l.z.string().min(6,"At least 6 chars").optional(),createAccount:l.z.boolean().optional()});var c=r(71423),u=r(85814),p=r.n(u),x=r(43210),m=r(57175);function h({initialValues:e,isLoggedIn:t}){let{cart:r}=(0,c._)(),{register:l,handleSubmit:u,formState:{errors:h}}=(0,i.mN)({resolver:(0,n.u)(d),defaultValues:{email:e.email??"",phone:e.phone??""}}),[f,g]=(0,x.useState)(!1),[v,b]=(0,x.useState)(!1),y=async e=>{let t=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:e,items:r})}),s=await t.json();s.url?window.location.href=s.url:alert(s.error||"Checkout failed")};return console.log(h),(0,s.jsxs)("form",{onSubmit:u(y),className:"space-y-4 max-w-md mx-auto",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.p,{...l("fullName"),placeholder:"Full Name"}),h.fullName&&(0,s.jsx)("div",{className:"text-destructive text-xs",children:h.fullName.message})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a.p,{...l("phone"),placeholder:"Phone",disabled:t&&!v,defaultValue:e.phone??"",className:t&&!v?"bg-gray-100 cursor-not-allowed":""}),t&&!v&&(0,s.jsx)("button",{type:"button",onClick:()=>b(!0),className:"absolute right-2 top-2 p-1 text-gray-400 hover:text-blue-600",tabIndex:-1,"aria-label":"Edit phone",children:(0,s.jsx)(m.A,{size:16})}),t&&v&&(0,s.jsx)("div",{className:"text-yellow-600 text-xs mt-1",children:"This will become your new login phone number for future sign-in."}),h.phone?(0,s.jsx)("div",{className:"text-destructive text-xs",children:h.phone.message}):!v&&t&&(0,s.jsx)("div",{className:"text-muted-foreground text-xs mt-1",children:"To change your login phone number, click the edit icon."})]})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a.p,{...l("email"),type:"email",placeholder:"Email",disabled:t&&!f,defaultValue:e.email??"",className:t&&!f?"bg-gray-100 cursor-not-allowed":""}),t&&!f&&(0,s.jsx)("button",{type:"button",onClick:()=>g(!0),className:"absolute right-2 top-2 p-1 text-gray-400 hover:text-blue-600",tabIndex:-1,"aria-label":"Edit email",children:(0,s.jsx)(m.A,{size:16})}),t&&f&&(0,s.jsx)("div",{className:"text-yellow-600 text-xs mt-1",children:"This will become your new login email for future sign-in."}),h.email?(0,s.jsx)("div",{className:"text-destructive text-xs",children:h.email.message}):!f&&t&&(0,s.jsx)("div",{className:"text-muted-foreground text-xs mt-1",children:"To change your login email, click the edit icon."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.p,{...l("address1"),placeholder:"Address Line 1"}),h.address1&&(0,s.jsx)("div",{className:"text-destructive text-xs",children:h.address1.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.p,{...l("address2"),placeholder:"Address Line 2 (optional)"}),h.address2&&(0,s.jsx)("div",{className:"text-destructive text-xs",children:h.address2.message})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.p,{...l("city"),placeholder:"City",className:"flex-1"}),(0,s.jsx)(a.p,{...l("postalCode"),placeholder:"Postal Code",className:"flex-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.p,{...l("country"),placeholder:"Country"}),h.country&&(0,s.jsx)("div",{className:"text-destructive text-xs",children:h.country.message})]}),!t&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm text-destructive",children:["If you have an account, please"," ",(0,s.jsx)(p(),{className:"text-blue-500 underline",href:"/login",children:"login"})," ","instead of creating a new account."]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(a.p,{...l("password"),type:"password",placeholder:"Password",required:!t}),h.password&&(0,s.jsx)("div",{className:"text-destructive text-xs",children:h.password.message})]})]}),(0,s.jsx)(o.$,{type:"submit",className:"w-full mt-2",children:"Continue to Payment"})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,4553,4999,5473,1658,2105,9464,5962],()=>r(65490));module.exports=s})();