(()=>{var e={};e.id=83,e.ids=[83],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69887:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>d,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>c});var o=r(96559),i=r(48088),a=r(37719),n=r(32190),u=r(79464);function p(e,t){return"bigint"==typeof t?t.toString():t}async function c(e){let{searchParams:t}=new URL(e.url),r=parseInt(t.get("page")||"1",10),s=parseInt(t.get("pageSize")||"20",10),o=t.get("categoryId"),i=t.get("brandId"),a=t.get("search"),c={};o&&(c.categoryId=BigInt(o)),i&&(c.brandId=BigInt(i)),a&&(c.OR=[{name:{contains:a}},{slug:{contains:a}}]);let d=await u.z.product.count({where:c}),l=(await u.z.product.findMany({where:c,include:{brand:!0,category:!0,productCategories:{include:{category:!0}},variants:{include:{values:{include:{option:!0,value:!0}}}}},orderBy:{createdAt:"desc"},skip:(r-1)*s,take:s})).map(e=>({...e,variants:e.variants.map(e=>({...e,options:e.values.map(e=>({optionId:e.optionId,optionName:e.option.name,valueId:e.valueId,value:e.value.value}))})),categories:e.productCategories.map(e=>e.category)}));return new n.NextResponse(JSON.stringify({products:l,total:d,page:r,pageSize:s,totalPages:Math.ceil(d/s)},p),{headers:{"Content-Type":"application/json"}})}let d=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/product/route",pathname:"/api/product",filename:"route",bundlePath:"app/api/product/route"},resolvedPagePath:"C:\\nextjs\\e-commerce-store\\my-app\\app\\api\\product\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:x,serverHooks:g}=d;function v(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:x})}},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78335:()=>{},78474:e=>{"use strict";e.exports=require("node:events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4243,580,9464],()=>r(69887));module.exports=s})();